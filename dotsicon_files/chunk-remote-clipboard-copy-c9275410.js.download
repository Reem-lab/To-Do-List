System.register(["./chunk-vendor.js","./chunk-copy.js","./chunk-frameworks.js"],function(d){"use strict";var h,a,u,f,y;return{setters:[function(s){h=s.j,a=s.t,u=s.c},function(s){f=s.c},function(s){y=s.V}],execute:function(){var s=Object.defineProperty,m=Object.getOwnPropertyDescriptor,w=(t,e)=>s(t,"name",{value:e,configurable:!0}),i=(t,e,o,c)=>{for(var n=c>1?void 0:c?m(e,o):e,p=t.length-1,l;p>=0;p--)(l=t[p])&&(n=(c?l(e,o,n):l(n))||n);return c&&n&&s(e,o,n),n};const C=["idle","fetching","success","error"],b=["success","error"];let r=d("RemoteClipboardCopyElement",class extends HTMLElement{constructor(){super(...arguments);this.src="",this.stateTimeout=2e3,this.transientStateTimer=null,this._state="idle"}connectedCallback(){this.render()}get state(){return this._state}set state(t){!C.includes(t)||(this._state=t,this.render(),this.transientStateTimer&&(window.clearTimeout(this.transientStateTimer),this.transientStateTimer=null),b.includes(t)&&(this.transientStateTimer=window.setTimeout(()=>{this.state="idle"},this.stateTimeout)))}asyncClipboardSupported(){return"clipboard"in navigator&&typeof ClipboardItem!="undefined"}async remoteCopy(){if(this.src===""||this.state!=="idle")return;const t=this.fetchContentWithState();try{await this.asyncClipboard(t)}catch(e){try{await this.awaitThenCopy(t)}catch(o){throw this.state="error",o}}}async asyncClipboard(t){if(!this.asyncClipboardSupported())throw new Error("Async clipboard API is not supported");const e=new ClipboardItem({"text/plain":t});await navigator.clipboard.write([e]),this.state="success"}async awaitThenCopy(t){const e=await t;await f(await e.text()),this.state="success"}async fetchContent(){await y();const t=await fetch(this.src,{method:"GET",redirect:"follow"});if(!t.ok)throw new Error("Fetching content failed");let e=await t.text();return e=e.replace(/\r?\n$/,""),new Blob([e],{type:"text/plain"})}async fetchContentWithState(){this.state="fetching";try{return await this.fetchContent()}catch(t){throw this.state="error",t}}render(){this.idle&&(this.idle.hidden=this.state!=="idle"),this.fetching&&(this.fetching.hidden=this.state!=="fetching"),this.success&&(this.success.hidden=this.state!=="success"),this.error&&(this.error.hidden=this.state!=="error")}});w(r,"RemoteClipboardCopyElement"),i([h],r.prototype,"src",2),i([h],r.prototype,"stateTimeout",2),i([a],r.prototype,"idle",2),i([a],r.prototype,"fetching",2),i([a],r.prototype,"success",2),i([a],r.prototype,"error",2),r=d("RemoteClipboardCopyElement",i([u],r))}}});
//# sourceMappingURL=chunk-remote-clipboard-copy-25bc494f.js.map
